<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/idea_header.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/idea_header.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/idea_header_small.png">
  <link rel="mask-icon" href="/images/idea_header.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zijianhan.github.io","root":"/","scheme":"Pisces","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="title: Uber ATG’s ML Infrastructure and Version Control Platform Architectureoriginal post link: https:&#x2F;&#x2F;eng.uber.com&#x2F;machine-learning-model-life-cycle-version-control&#x2F;Chinese version: https:&#x2F;&#x2F;mp.weix">
<meta property="og:type" content="article">
<meta property="og:title" content="UberMLInfrastructureForAD">
<meta property="og:url" content="http://zijianhan.github.io/2020/05/02/UberMLInfrastructureForAD/index.html">
<meta property="og:site_name" content="Way To Intelligence">
<meta property="og:description" content="title: Uber ATG’s ML Infrastructure and Version Control Platform Architectureoriginal post link: https:&#x2F;&#x2F;eng.uber.com&#x2F;machine-learning-model-life-cycle-version-control&#x2F;Chinese version: https:&#x2F;&#x2F;mp.weix">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-05-02T06:37:33.431Z">
<meta property="article:modified_time" content="2020-05-02T06:32:30.833Z">
<meta property="article:author" content="Zijian Han">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://zijianhan.github.io/2020/05/02/UberMLInfrastructureForAD/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>UberMLInfrastructureForAD | Way To Intelligence</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Way To Intelligence</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Learning path of AI, Machine Learning, Autonomous Driving, and Life</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-photo">

    <a href="/photo" rel="section"><i class="fa fa-fw fa-camera-retro"></i>Photograph</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="http://zijianhan.github.io/2020/05/02/UberMLInfrastructureForAD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zijian.jpg">
      <meta itemprop="name" content="Zijian Han">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Way To Intelligence">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          UberMLInfrastructureForAD
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-05-02 08:37:33 / Modified: 08:32:30" itemprop="dateCreated datePublished" datetime="2020-05-02T08:37:33+02:00">2020-05-02</time>
            </span>

          
            <span id="/2020/05/02/UberMLInfrastructureForAD/" class="post-meta-item leancloud_visitors" data-flag-title="UberMLInfrastructureForAD" title="Popular">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Popular: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
            <span>℃</span>
            <span class="post-meta-item" title="Popular" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Popular: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2020/05/02/UberMLInfrastructureForAD/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/05/02/UberMLInfrastructureForAD/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>title: Uber ATG’s ML Infrastructure and Version Control Platform Architecture<br>original post link: <a href="https://eng.uber.com/machine-learning-model-life-cycle-version-control/" target="_blank" rel="noopener">https://eng.uber.com/machine-learning-model-life-cycle-version-control/</a><br>Chinese version: <a href="https://mp.weixin.qq.com/s/yJzW3-RLC0d05vW2EqjY0w" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/yJzW3-RLC0d05vW2EqjY0w</a><br>Uber ATG: Advanced Technologies Group, developing self-driving vehicles technology.</p>
<p>General introduction of contents: ML components, development life cycle, automating tool (VerCD - Ver continuous delivery)</p>
<h2 id="Self-driving-vehicle-ML-model-components"><a href="#Self-driving-vehicle-ML-model-components" class="headerlink" title="Self-driving vehicle ML model components"></a>Self-driving vehicle ML model components</h2><p>Software components (tasks) that contains one or more ML models</p>
<ul>
<li>Perception: Object identification (types: vehicle, pedestrian, bicycle, etc.) and 3D localization.</li>
<li>Prediction: Combine object detection results (type + localization) with HD maps, to perform object trajectory prediction in future n seconds in a given scene. The Prediction component allows the self-driving vehicle to anticipate where actors will most likely be located at various points in the future.</li>
<li>Motion Planning:<ul>
<li>Input:<ul>
<li>self-driving vehicle’s destination</li>
<li>the predicted trajectories of all actors in the scene</li>
<li>the high definition map</li>
<li>other mechanisms</li>
</ul>
</li>
<li>Output: plan the path of the vehicle.</li>
</ul>
</li>
<li>Control: Path following for motion planned path by controlling steering, brakes and accelerator.</li>
</ul>
<h2 id="ML-model-life-cycle"><a href="#ML-model-life-cycle" class="headerlink" title="ML model life cycle."></a>ML model life cycle.</h2><p>Training data source: sensor-equipped vehicles(Lidar, cameras, radar) in a wide variety of traffic situations.<br>Labeling work: location, shape, other attributes like object type, etc.<br>Model training: sufficient labeled training data + HD map<br>ML Model different layers: highest layer: ML applications, middle layer: common ML libraries such as TF and PyTorch, GPU acceleration.<br>Five-step life cycle for training and deployment of ML models:<br>[ATG_ML_platform_figure-lifecycle.png]</p>
<h3 id="Data-ingestion"><a href="#Data-ingestion" class="headerlink" title="Data ingestion"></a>Data ingestion</h3><p>Data ingestion process: Select the logs intended to use and extract data from them.</p>
<ol>
<li><p>Data log selection and dividing: 75% training data, 15% testing data, 10% validation data. The pipeline used to select logs and split the data into 3 groups based on geographical location: GeoSplit.</p>
</li>
<li><p>Data extraction from logs (Using Petastorm, Uber ATG’s open source data accesss library for DL):<br>Data contents:</p>
</li>
</ol>
<ul>
<li>Images from the vehicle’s cameras</li>
<li>LiDAR 3D point information</li>
<li>Radar information</li>
<li>The state of the vehicle, including location, speed, acceleration and heading</li>
<li>Map information, such as the vehicle’s route and lanes it used</li>
<li>Ground truth labels<br>Extraction process:</li>
<li>extract data from multiple logs in parallel using Apache Spark (this way keeps the data in an optimized format by storing all info needed in GPUs memory after load from HDFS, so the training is efficient)</li>
<li>save data log-by-log on HDFS<br>[ATG_ML_platform_figure-extraction.png] shows the extraction process running on CPU cluster.<br>(We use extracted data (including the images pictured here, along with other sensor data) to run distributed training using Horovod on the GPU cluster and save the data to HDFS.)</li>
</ul>
<h3 id="Data-validation"><a href="#Data-validation" class="headerlink" title="Data validation"></a>Data validation</h3><ol>
<li>Run queries to pull: 1) the number of frames in a scene 2) the number of occurrences of the different label types.</li>
<li>Compare results to previous data sets to see how conditions have changed. Further analysis needed if not as expected.</li>
</ol>
<h3 id="Model-training"><a href="#Model-training" class="headerlink" title="Model training"></a>Model training</h3><p>Distributed ML training system used: Horovod!</p>
<ol>
<li>Spread the training process on different GPUs with data parallelism as shown in figure below (same model trained on different GPUs with different parts of data). Each process performs forward and backword propagation independently.<br>[ATG_ML_platform_figure-modeltraining.png]</li>
<li>Combine the parallel-trained model(knowledge distributing as I understand): using Horovod’s ring-allreduce algorithm to average gradients and disperse them to all work nodes without requiring a parameter server.</li>
<li>Training verification: through TensorBoard, leveraging ML frameworks like TensorFlow and PyTorch.</li>
</ol>
<p>ML computing with hybrid approach: both in on-premise data centers powered by GPU and CPU clusters as well as in the cloud.</p>
<ul>
<li>on-premise data center: orchestrate training jobs using Peloton (<a href="https://eng.uber.com/resource-scheduler-cluster-management-peloton/" target="_blank" rel="noopener">https://eng.uber.com/resource-scheduler-cluster-management-peloton/</a>), to scales jobs to GPUs and CPUs.</li>
<li>cloud-based training: using Kubernetes (<a href="https://kubernetes.io/" target="_blank" rel="noopener">https://kubernetes.io/</a>) to deploy and scale application containers across clusters.</li>
</ul>
<h3 id="Model-evaluation"><a href="#Model-evaluation" class="headerlink" title="Model evaluation"></a>Model evaluation</h3><p>Evaluate the performance on model itself (with model-specific metrics) and on entire system (with system metrics). Also use hardware metrics to evaluate the model running speed on hardware.</p>
<ol>
<li>Model-specific metrics<br>For example, Perception model: precision(correct detection rate) and recall(the proportion of the ground truth objects that model identified correctly).<br>For not performing well metrics, we adjust data pipeline by including similar cases(<a href="https://eng.uber.com/searchable-ground-truth-atg/" target="_blank" rel="noopener">https://eng.uber.com/searchable-ground-truth-atg/</a>) (data augmentation). But prevent overfitting.</li>
<li>System metrics<br>Mainly safety and comfort measurement on overall vehicle motion, with large test set. Performed after model-specific metrics are well enough. Due to ML model dependencies, the system evaluation will give a comprehensive overview between components.</li>
<li>Hardware metrics<br>Using ATG’s internal benchmarking system to profile a certain part of software, and evaluate how quick it will run on vehicle hardware.</li>
</ol>
<h3 id="Model-serving"><a href="#Model-serving" class="headerlink" title="Model serving"></a>Model serving</h3><p>Deploy the model on an inference engine in vehicle with continuous iteration, focusing on the part need to be improved learnt from model evaluation part.</p>
<h2 id="Accelerating-ML-research-with-CI-and-CD"><a href="#Accelerating-ML-research-with-CI-and-CD" class="headerlink" title="Accelerating ML research with CI and CD"></a>Accelerating ML research with CI and CD</h2><p>Continuous integration and delivery (VerCD platform) will wrap and automate the 5-step ML model developing process to an end-to-end workflow, reduce errors and boost the speed.</p>
<p>The VerCD platform is such a system that tracks dependencies between code, datasets and models throughout the workflow, starts with the dataset extraction stage, cover model training, and conclude with computing metrics.</p>
<p>Why developed Uber’s own platform:</p>
<ol>
<li>DL models have deep dependencies and development complexity. Although open source tools like Kubeflow and TensorFlow Extended provide high-level orchestration to build dataset and train models, they are not well integrated, and do not fully enable CD and CI</li>
<li>Traditional versioning and CD/CD tools like Git and Jenkins do not operate over ML artifacts.</li>
</ol>
<h3 id="The-need-for-agile-development-in-ML-workflows"><a href="#The-need-for-agile-development-in-ML-workflows" class="headerlink" title="The need for agile development in ML workflows"></a>The need for agile development in ML workflows</h3><p>The standard agile development process (<a href="https://en.wikipedia.org/wiki/Agile_software_development" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Agile_software_development</a>) in application for ML workflows (what do they mean for ML):</p>
<ul>
<li>version controlling:<br>allows the analysis of impact of a change on some part towards downstream dependencies, independently from one developer to another.</li>
<li>dependency tracking<br>Dependency between data and results: adjustments to labels and raw data changes the nature of the dataset, which in turn affects training results. Moreover, the way of data extraction and model training code and configuration also affects the results. So the dependency tracking should tell that correct order: data extraction first then model building.</li>
<li>continuous integration and continuous delivery:<br>the ML workflow involves code, data and models, of which only the first is handled by traditional software tools. Following figure illustrates some differences in workflow, and next figure shows the scope and complexity of system required to build a final ML artifact.<br>[ATG_ML_platform_figure-mlworkflow.png] The traditional continuous delivery cycle differs from that used for ML in that, instead of just building code and testing it, ML developers must also construct data sets, train models, and compute model metrics.<br>[ATG_ML_platform_figure-mlrequirementsforsystem.png] The final result of ML workflows is just a tiny artifact compared to all of the supporting systems and code (such as configuration, data collection, feature extraction, data verification, machine resource management, analysis tools, process management tools, serving infrastructure, and monitoring). (Source: Hidden Technical Debt in Machine Learning Systems. Used with permission.)</li>
</ul>
<h3 id="Deep-dependency-graphs-in-the-self-driving-domain"><a href="#Deep-dependency-graphs-in-the-self-driving-domain" class="headerlink" title="Deep dependency graphs in the self-driving domain"></a>Deep dependency graphs in the self-driving domain</h3><p>The deep dependency graph is a result of the layered architecture of self-driving software stack, where each layer provides a different ML function, shown in figure below. The dependency graph for an object detection model, shown on the left, and two other ML models, shown on the right, depicts code and configurations that are handled by version control systems (in green) and items that are not handled by version control (in grey).<br>[ATG_ML_platform_figure-dependencygraph.png]<br>3 ML layers:</p>
<ul>
<li>an object detection model whose input is raw sensor data,</li>
<li>a path prediction model whose input is the set of objects detected by the object detection model,</li>
<li>a planning model whose inputs are the outputs of the path prediction model.<br>Each layer shows on left involves generating 3 artifacts:</li>
</ul>
<ol>
<li>A data set, composed of raw source data, bounding boxes around different objects in the source image data (i.e. labels), and the data set generation code.</li>
<li>A trained model, which requires as input the data set artifact, the model training code, and configuration files governing model training.</li>
<li>A metrics report, which requires as input the trained model artifact, the data set, and the metrics generation code.</li>
</ol>
<p>Such deep dependencies brings particular challenge for CD.</p>
<h2 id="VerCD-for-Uber-ATG"><a href="#VerCD-for-Uber-ATG" class="headerlink" title="VerCD for Uber ATG"></a>VerCD for Uber ATG</h2><p>VerCD is a set of tools and microservices, to provide versioning and continuous delivery for Ml code and artifacts for Uber’s AD software. It’s a platform with well integration on other components to empower existing orchestrators and guarantee the smooth end-to-end ML workflow.</p>
<p>VerCD offers a metadata service that tracks all dependencies of each ML compenents, include not only code but also data and model artifacts. This will ensure that ML artifacts are always reproducible and traceable for comparing new experiments against a historical baseline or track down bugs.</p>
<h3 id="VerCD-system-architecture"><a href="#VerCD-system-architecture" class="headerlink" title="VerCD system architecture"></a>VerCD system architecture</h3><p>The platform considers both experimental(process functions to build datasets, train models and run metrics) and production workflow(CD/CD driven by an orchestrator). So it must have interface for both humans and machines, for which we chose a REST APU with Python library bindings, show as below 2 figures.<br>[ATG_ML_platform_figure-07.png] VerCD consists of a version and dependency metadata service, and an orchestrator service. We use stock frameworks such as Flask, SQLAlchemy, MySQL, and Jenkins but augment their functionality with ATG-specific integrations.</p>
<p>VerCD is a set of separate microservices, architecture at Uber (<a href="https://eng.uber.com/building-tincup-microservice-implementation/" target="_blank" rel="noopener">https://eng.uber.com/building-tincup-microservice-implementation/</a>), where each microservice is responsible for a function, so the system can easily scale. For CD/CI workflow, it’s linear and fixed, while for experimental workflow it’s more flexible.</p>
<h4 id="Version-and-Dependency-Metadata-Service"><a href="#Version-and-Dependency-Metadata-Service" class="headerlink" title="Version and Dependency Metadata Service"></a>Version and Dependency Metadata Service</h4><p>[ATG_ML_platform_figure-metadataservice.png]<br>The Version and Dependency Metadata Service has individual endpoints for data set building, model training, and metrics computation. The REST API is a Flask and SQLAlchemy app, backed by MySQL to hold the dependency metadata. The yellow API handlers and data access layers were designed for ATG-specific use cases.</p>
<h4 id="Orchestrator-Service"><a href="#Orchestrator-Service" class="headerlink" title="Orchestrator Service"></a>Orchestrator Service</h4><p>[ATG_ML_platform_figure-orchestratorservice.png]<br>VerCD’s Orchestrator Service manages the workflow pipelines for building data sets, training models, and computing metrics. It is comprised of an off-the-shelf Jenkins distribution, augmented with our own ATG-specific integrations (yellow) that give the orchestrator the ability to interact with external ATG systems.</p>
<h4 id="Example-workflow"><a href="#Example-workflow" class="headerlink" title="Example workflow"></a>Example workflow</h4><p>Workflow: dependencies of any dataset, model or metric builds are registered with VerCD, which manages the infomation in a database backend. Then use a stock Jenkins orchestrator to do regular builds, and augment the function by providing connectors and integration code so it can interpret dependency metadata and operate ATG-specific systems (like call to build a runtime for testing, interact with code repo, create images with DL or Apache Spark lib, replicating datasets in between data centers and cloud, etc.).</p>
<p>For example: registering a new data set</p>
<h3 id="Microservice-APIs"><a href="#Microservice-APIs" class="headerlink" title="Microservice APIs"></a>Microservice APIs</h3><h4 id="Data-set-service-API"><a href="#Data-set-service-API" class="headerlink" title="Data set service API"></a>Data set service API</h4><h4 id="Model-service-API"><a href="#Model-service-API" class="headerlink" title="Model service API"></a>Model service API</h4><h4 id="Metrics-service-API"><a href="#Metrics-service-API" class="headerlink" title="Metrics service API"></a>Metrics service API</h4><h3 id="Data-set-and-model-onboarding-and-results"><a href="#Data-set-and-model-onboarding-and-results" class="headerlink" title="Data set and model onboarding and results"></a>Data set and model onboarding and results</h3>
    </div>

    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------Ops, this is the bottom line. Thanks for reading <i class="fa fa-thumbs-up" aria-hidden="true"></i>
-------------</div>
    
</div>

      
    </div>

    
    
    
        <div class="reward-container">
  <div>Your encourgement will light my way forward.</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    Donate
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay" alt="Zijian Han WeChat Pay">
        <p>WeChat Pay</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay" alt="Zijian Han Alipay">
        <p>Alipay</p>
      </div>
      <div style="display: inline-block;">
        <img src="/images/swish" alt="Zijian Han Swish">
        <p>Swish</p>
      </div>

  </div>
</div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/05/01/AILearningArchitecture/" rel="prev" title="AI Platform Study">
      <i class="fa fa-chevron-left"></i> AI Platform Study
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Self-driving-vehicle-ML-model-components"><span class="nav-text">Self-driving vehicle ML model components</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ML-model-life-cycle"><span class="nav-text">ML model life cycle.</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Data-ingestion"><span class="nav-text">Data ingestion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Data-validation"><span class="nav-text">Data validation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Model-training"><span class="nav-text">Model training</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Model-evaluation"><span class="nav-text">Model evaluation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Model-serving"><span class="nav-text">Model serving</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Accelerating-ML-research-with-CI-and-CD"><span class="nav-text">Accelerating ML research with CI and CD</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#The-need-for-agile-development-in-ML-workflows"><span class="nav-text">The need for agile development in ML workflows</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Deep-dependency-graphs-in-the-self-driving-domain"><span class="nav-text">Deep dependency graphs in the self-driving domain</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#VerCD-for-Uber-ATG"><span class="nav-text">VerCD for Uber ATG</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#VerCD-system-architecture"><span class="nav-text">VerCD system architecture</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Version-and-Dependency-Metadata-Service"><span class="nav-text">Version and Dependency Metadata Service</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Orchestrator-Service"><span class="nav-text">Orchestrator Service</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-workflow"><span class="nav-text">Example workflow</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Microservice-APIs"><span class="nav-text">Microservice APIs</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Data-set-service-API"><span class="nav-text">Data set service API</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Model-service-API"><span class="nav-text">Model service API</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Metrics-service-API"><span class="nav-text">Metrics service API</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Data-set-and-model-onboarding-and-results"><span class="nav-text">Data set and model onboarding and results</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Zijian Han"
      src="/images/zijian.jpg">
  <p class="site-author-name" itemprop="name">Zijian Han</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/ZijianHan" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ZijianHan" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hzjalex7046@gmail.com" title="E-Mail → mailto:hzjalex7046@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zijian Han</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">Symbols count total: </span>
    <span title="Symbols count total">17k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">Reading time total &asymp;</span>
    <span title="Reading time total">15 mins.</span>
</div>

<!--
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.2
  </div>
-->

<div class="powered-by">
<i class="fa fa-user-md"></i>
<span id="busuanzi_container_site_uv">
  Total number of visitors:<span id="busuanzi_value_site_uv"></span>&nbsp;&nbsp;|
</span>
<span id="busuanzi_container_site_pv">
    &nbsp;Total visiting times: <span id="busuanzi_value_site_pv"></span>
</span>
</div>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>






  <script>
  function leancloudSelector(url) {
    url = encodeURI(url);
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.getAttribute('id'));
      var title = visitors.dataset.flagTitle;

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .then(() => {
                leancloudSelector(url).innerText = counter.time + 1;
              })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              })
          } else {
              Counter('post', '/classes/Counter', { title, url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.getAttribute('id'));
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (let item of results) {
            let { url, time } = item;
            leancloudSelector(url).innerText = time;
          }
          for (let url of entries) {
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=AX1UM0QKRVyqQaVUEut79i4O-MdYXbMMI')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : 'AX1UM0QKRVyqQaVUEut79i4O-MdYXbMMI',
            'X-LC-Key'    : 'SNYYHCFGARehrNRYdinuLXng',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'AX1UM0QKRVyqQaVUEut79i4O-MdYXbMMI',
      appKey     : 'SNYYHCFGARehrNRYdinuLXng',
      placeholder: "Hey there beautiful, say something ~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
